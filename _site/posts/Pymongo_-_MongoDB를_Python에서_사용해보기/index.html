<!DOCTYPE html><html lang="ko" mode="light" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Pymongo - MongoDB를 Python에서 사용해보기 | Data Include Me</title><meta name="generator" content="Jekyll v3.9.3" /><meta property="og:title" content="Pymongo - MongoDB를 Python에서 사용해보기" /><meta name="author" content="HyunMin Kim" /><meta property="og:locale" content="ko" /><meta name="description" content="1. Pymongo 1.1 Pymongo란? Python 에서 MongoDB 작업을 위한 패키지" /><meta property="og:description" content="1. Pymongo 1.1 Pymongo란? Python 에서 MongoDB 작업을 위한 패키지" /><link rel="canonical" href="https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/" /><meta property="og:url" content="https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/" /><meta property="og:site_name" content="Data Include Me" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-09T16:30:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Pymongo - MongoDB를 Python에서 사용해보기" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@HyunMin Kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"HyunMin Kim"},"dateModified":"2020-10-09T16:30:00+09:00","datePublished":"2020-10-09T16:30:00+09:00","description":"1. Pymongo 1.1 Pymongo란? Python 에서 MongoDB 작업을 위한 패키지","headline":"Pymongo - MongoDB를 Python에서 사용해보기","mainEntityOfPage":{"@type":"WebPage","@id":"https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/"},"url":"https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/"}</script><meta property="og:image" content="https://datainclude.me/assets/img/sample/avatar.jpg" /> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="36x36" href="/assets/img/favicons/android-icon-36x36.png"><link rel="icon" type="image/png" sizes="48x48" href="/assets/img/favicons/android-icon-48x48.png"><link rel="icon" type="image/png" sizes="72x72" href="/assets/img/favicons/android-icon-72x72.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/android-icon-96x96.png"><link rel="icon" type="image/png" sizes="144x144" href="/assets/img/favicons/android-icon-144x144.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="70x70" href="/assets/img/favicons/ms-icon-70x70.png"><link rel="icon" type="image/png" sizes="144x144" href="/assets/img/favicons/ms-icon-144x144.png"><link rel="icon" type="image/png" sizes="150x150" href="/assets/img/favicons/ms-icon-150x150.png"><link rel="icon" type="image/png" sizes="310x310" href="/assets/img/favicons/ms-icon-310x310.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preload" href="https://www.googletagmanager.com/gtm.js?id=GTM-MW9VRMW9" as="script"> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-MW9VRMW9');</script><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" media="print" onload="this.media='all'"> <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> </noscript> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MW9VRMW9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Data Include Me</a></div><div class="site-subtitle font-italic">Data Science Blog</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/hmkim312" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['sanarial312','gmail.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Pymongo - MongoDB를 Python에서 사용해보기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <script type="text/javascript"> var lazyloadads = false; function loadAds() { if (!lazyloadads) { var script = document.createElement("script"); script.type = "text/javascript"; script.async = true; script.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7594406644928408"; document.body.appendChild(script); lazyloadads = true; } } window.addEventListener("mousemove", loadAds, { once: true }); window.addEventListener('touchstart', loadAds, { once: true }); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Pymongo - MongoDB를 Python에서 사용해보기</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Oct 9, 2020, 4:30 PM +0900" > Oct 9, 2020 <i class="unloaded">2020-10-09T16:30:00+09:00</i> </span> by <span class="author"> HyunMin Kim </span></div><a href="https://hits.seeyoufarm.com"> <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/%2F&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=views&edge_flat=false" alt="페이지 조회수 뱃지", width: 100%;, height: 100%;/> </a></div><div class="post-content"><h2 id="1-pymongo">1. Pymongo</h2><hr /><h3 id="11-pymongo란">1.1 Pymongo란?</h3><ul><li>Python 에서 MongoDB 작업을 위한 패키지</li></ul><p><br /></p><h3 id="12-설치">1.2 설치</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">pymongo</span><span class="o">==</span><span class="mf">2.8</span><span class="p">.</span><span class="mi">1</span>
</pre></table></code></div></div><ul><li>pip install pymongo==설치할 버전으로 설치함</li></ul><p><br /></p><h2 id="2-pymongo-실습">2. Pymongo 실습</h2><hr /><h3 id="21-import">2.1 Import</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pymongo</span>
</pre></table></code></div></div><ul><li>Pymongo를 import 함</li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">zigbang</span> <span class="k">as</span> <span class="n">zb</span>
</pre></table></code></div></div><ul><li>zigbang의 매물을 크롤링하는 패키지를 import 함</li><li>위의 패키지는 따로 만든 패키지로, 실제로는 없음</li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
</pre></table></code></div></div><ul><li>데이터프레임으로 생성을 하기 위해 판다스를 import함</li></ul><p><br /></p><h3 id="22-데이터-베이스-서버-연결">2.2 데이터 베이스 서버 연결</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">client</span> <span class="o">=</span> <span class="n">pymongo</span><span class="p">.</span><span class="n">MongoClient</span><span class="p">(</span><span class="s">"mongodb://user:passwd@ip:27017/"</span><span class="p">)</span>
<span class="n">client</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>MongoClient('ip주소', 27017)
</pre></table></code></div></div><ul><li>MongoDB의 서버와 연결하여 client 객체를 생성함</li><li>연결은 pymongo의 Mongoclient를 사용하여 ip와 port를 입력함</li></ul><p><br /></p><h3 id="23-데이터-베이스와-컬렉션-생성">2.3 데이터 베이스와 컬렉션 생성</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">zigbang</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">crawling</span><span class="p">.</span><span class="n">zigbang</span>
<span class="n">zigbang</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Collection(Database(MongoClient('ip주소', 27017), 'crawling'), 'zigbang')
</pre></table></code></div></div><ul><li>crawling 이라는 데이터베이스에 zigbang이라는 컬렉션을 생성함</li><li>client(위에서 생성한 객체).database.collection 으로 생성</li></ul><p><br /></p><h3 id="24-insert">2.4 Insert</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">items</span> <span class="o">=</span> <span class="n">zb</span><span class="p">.</span><span class="n">oneroom</span><span class="p">(</span><span class="s">"성수동"</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>9
</pre></table></code></div></div><ul><li>Zigbang패키지로 성수동의 원룸 매물을 크롤링함</li><li>크롤링된 정보는 Dictionary형태로 Key : Value 로 여러 정보들이 저장되어있음</li><li>총 9개의 매물이 크롤링되었음</li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">ids</span> <span class="o">=</span> <span class="n">zigbang</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>91
</pre></table></code></div></div><ul><li>위에서 크롤링한 데이터를 zigbang이라는 컬렉션에 insert함</li><li>이전에 크롤링된 데이터까지 하여 91개의 데이터가 저장되어 있음</li></ul><p><br /></p><h3 id="25-데이터-프레임-저장">2.5 데이터 프레임 저장</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">sungsoo_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">"_floor"</span><span class="p">,</span> <span class="s">"address1"</span><span class="p">,</span> <span class="s">"rent"</span><span class="p">,</span> <span class="s">"size"</span><span class="p">,</span> <span class="s">"deposit"</span><span class="p">,</span> <span class="s">"options"</span><span class="p">]</span>
<span class="n">sungsoo_df</span> <span class="o">=</span> <span class="n">sungsoo_df</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
<span class="n">sungsoo_df</span><span class="p">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></table></code></div></div><p><br /></p><div><style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th><th>_floor<th>address1<th>rent<th>size<th>deposit<th>options<tbody><tr><th>89<td>2층<td>서울시 성동구 성수동2가<td>0<td>16.0<td>23000<td>-<tr><th>90<td>3층<td>서울시 성동구 성수동1가<td>60<td>15.0<td>3000<td>-</table></div><p><br /></p><ul><li>크롤링된 정보 중 필요한 정보들(층, 주소, 월세, 방 사이즈, 보증금, 옵션)만 sungsoo_df라는 데이터프레임으로 생성함</li></ul><p><br /></p><h3 id="26-필요한-정보만-다시-insert">2.6 필요한 정보만 다시 Insert</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">zigbang2</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">crawling</span><span class="p">.</span><span class="n">zigbang2</span>
</pre></table></code></div></div><ul><li>위에서 정리한 sungsoo_df를 crawling 데이터베이스에 zigbang2라는 collection에 넣기 위해 collection을 재 생성함</li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">items</span> <span class="o">=</span> <span class="n">sungsoo_df</span><span class="p">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s">"records"</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>df.to_dict(‘records’)를 사용하여 데이터프레임을 리스트안에 딕셔너리로 만듬</li><li>to_dict는 판다스의 기능으로 데이터프레임을 딕셔너리로 만들어주며, 아래의 옵션들을 가진다<ul><li>dict(기본값) : dict like {column -&gt; {index -&gt; value}}</li><li>list : dict like {column -&gt; [values]}</li><li>series : dict like {column -&gt; Series(values)}</li><li>split : dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</li><li>records : list like [{column -&gt; value}, … , {column -&gt; value}]</li><li>index : dict like {index -&gt; {column -&gt; value}}</li></ul></li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>{'_floor': '4층',
 'address1': '서울시 성동구 성수동1가',
 'rent': 50,
 'size': 8.0,
 'deposit': 1000,
 'options': '에어컨,냉장고,세탁기,인덕션,옷장,신발장,싱크대'}
</pre></table></code></div></div><ul><li>데이터 1개 확인</li><li>위의 딕셔너리 형식이 리스트안에 생성되어 있음</li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">ids</span> <span class="o">=</span> <span class="n">zigbang2</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>zigbang2 컬렉션에 itmes를 insert함</li></ul><p><br /></p><h3 id="27-find">2.7 Find</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">질의</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">zigbang2</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>find를 하기 위해서 컬렉션에 query에 조회하는 질의(조건)을 넣어서 result 변수에 넣어줌</li></ul><p><br /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">QUERY</span> <span class="o">=</span> <span class="p">{</span><span class="s">"rent"</span><span class="p">:</span> <span class="p">{</span><span class="s">"$lte"</span><span class="p">:</span> <span class="mi">50</span><span class="p">}}</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">zigbang2</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">QUERY</span><span class="p">)</span>
<span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">).</span><span class="n">tail</span><span class="p">()</span>
</pre></table></code></div></div><p><br /></p><div><style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th><th>_floor<th>_id<th>address1<th>deposit<th>options<th>rent<th>size<tbody><tr><th>61<td>5층<td>5dbbdfeaa547631b003bbd04<td>서울시 성동구 성수동2가<td>26000<td>-<td>0<td>12.0<tr><th>62<td>3층<td>5dbbdfeaa547631b003bbd05<td>서울시 성동구 성수동1가<td>35000<td>-<td>0<td>22.0<tr><th>63<td>2층<td>5dbbdfeaa547631b003bbd08<td>서울시 성동구 성수동1가<td>18000<td>-<td>0<td>12.0<tr><th>64<td>옥탑방<td>5dbbdfeaa547631b003bbd0a<td>서울시 성동구 성수동1가<td>1000<td>-<td>50<td>10.0<tr><th>65<td>2층<td>5dbbdfeaa547631b003bbd0b<td>서울시 성동구 성수동2가<td>23000<td>-<td>0<td>16.0</table></div><p><br /></p><ul><li>$lte를 사용하여 rent(월세)가 50이하인 매물만 find하는 Query를 생성</li><li>collection.find(query)를 사용하여 조회함</li><li>조회한 데이터를 데이터프레임으로 생성 한 뒤 마지막 5개 매물만 조회</li></ul><h3 id="28-컬렉션-삭제">2.8 컬렉션 삭제</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">client</span><span class="p">.</span><span class="n">crawling</span><span class="p">.</span><span class="n">drop_collection</span><span class="p">(</span><span class="s">"zigbang"</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>drop_collecntion(컬렉션)이라는 메서드를 사용해서 삭제함</li></ul><p><br /></p><h3 id="29-데이터-베이스-삭제">2.9 데이터 베이스 삭제</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">client</span><span class="p">.</span><span class="n">drop_database</span><span class="p">(</span><span class="s">"crawling"</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>drop_database(데이터베이스)이라는 메서드를 사용해서 삭제함</li></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/database/'>DataBase</a>, <a href='/categories/mongodb/'>MongoDB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >MongoDB</a> <a href="/tags/pymongo/" class="post-tag no-text-decoration" >Pymongo</a> <a href="/tags/collection/" class="post-tag no-text-decoration" >Collection</a> <a href="/tags/document/" class="post-tag no-text-decoration" >Document</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Pymongo - MongoDB를 Python에서 사용해보기 - Data Include Me&url=https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Pymongo - MongoDB를 Python에서 사용해보기 - Data Include Me&u=https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Pymongo - MongoDB를 Python에서 사용해보기 - Data Include Me&url=https://datainclude.me/posts/Pymongo_-_MongoDB%EB%A5%BC_Python%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Panel on right side (Desktop views) v2.3 © 2024 Your Name MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li class="recent-item"> <a href="/posts/%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C_%EC%BB%B4%ED%93%A8%ED%8C%85_%EA%B0%80%EC%83%81%ED%99%94/">클라우드 컴퓨팅 - 가상화</a> <span class="text-muted small">2024-10-28</span></li><li class="recent-item"> <a href="/posts/gemini_api_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/">Gemini API 사용해보기</a> <span class="text-muted small">2024-03-12</span></li><li class="recent-item"> <a href="/posts/Ollama%EC%99%80_Python_%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC_%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC_LLaMa2%EB%A5%BC_%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">Ollama와 Python 라이브러리를 이용하여 LLaMa2를 로컬에서 사용하기</a> <span class="text-muted small">2024-02-13</span></li><li class="recent-item"> <a href="/posts/Mistral_7B_Fine_Tuning/">Mistral 7B 파인튜닝(Fine Tuning)하기</a> <span class="text-muted small">2023-10-25</span></li><li class="recent-item"> <a href="/posts/Penn_Fudan%EC%9C%BC%EB%A1%9C_%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94_%EA%B0%9D%EC%B2%B4_%ED%83%90%EC%A7%80_%EB%B6%84%ED%95%A0/">Penn-Fudan으로 알아보는 객체 탐지(Object Detection), 분할(Segmentation) with FasterRCNN</a> <span class="text-muted small">2023-10-23</span></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tensorflow/">Tensorflow</a> <a class="post-tag" href="/tags/sklearn/">Sklearn</a> <a class="post-tag" href="/tags/round/">Round</a> <a class="post-tag" href="/tags/python-lv0/">Python Lv0</a> <a class="post-tag" href="/tags/pca/">PCA</a> <a class="post-tag" href="/tags/eda/">EDA</a> <a class="post-tag" href="/tags/distinct/">Distinct</a> <a class="post-tag" href="/tags/random-forest/">Random Forest</a> <a class="post-tag" href="/tags/beautifulsoup/">Beautifulsoup</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div><style> .recent-item { margin-bottom: 0.5rem; } .recent-item a { color: var(--link-color); } .recent-item .small { font-size: 0.75rem; margin-left: 0.5rem; }</style></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/MongoDB_%EC%B4%88%EA%B8%89(1)/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 9, 2020 <i class="unloaded">2020-10-09T14:30:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MongoDB 초급(1)</h3><div class="text-muted small"><p> 1. Database 1.1 Create Database USE dss dss라는 이름의 데이터 베이스 생성 db 현재 사용중인 데이터 베이스 확인 SHOW dbs Database List 확인 데이터 베이스를 생성 후에 최소 1개 이상의 Document를 추가해야 생성된 데이터 베이스가 보임 ...</p></div></div></a></div><div class="card"> <a href="/posts/MongoDB_%EC%B4%88%EA%B8%89(2)/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 9, 2020 <i class="unloaded">2020-10-09T16:30:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MongoDB 초급(2)</h3><div class="text-muted small"><p> 1. 조회(Find) 1.1 Find db.collection.find(query, projection) Query : Document 조회 조건을 설정, 모든 Document를 조회 할때는 ({})를 사용함 Projection : Document를 조회할때 보여지는 필드(컬럼)를 정의 2. Query 2.1 기본 Docume...</p></div></div></a></div><div class="card"> <a href="/posts/Database_%EA%B8%B0%EC%B4%88/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Feb 12, 2020 <i class="unloaded">2020-02-12T12:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Database 기초</h3><div class="text-muted small"><p> 1. About Database 1.1 DB Database의 약자 데이터를 통합하여 관리하는 데이터의 집합 1.2 DBMS Database Management System의 약자 데이터베이스를 관리하는 미들웨어 시스템을 데이터베이스 관리시스템이라고 함 1.3 RDBMS Relational Database Ma...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/MongoDB_%EC%B4%88%EA%B8%89(2)/" class="btn btn-outline-primary"><p>MongoDB 초급(2)</p></a> <a href="/posts/2016%EB%85%84/" class="btn btn-outline-primary"><p>2016년 [Python]</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/tensorflow/">Tensorflow</a> <a class="post-tag" href="/tags/sklearn/">Sklearn</a> <a class="post-tag" href="/tags/round/">Round</a> <a class="post-tag" href="/tags/python-lv0/">Python Lv0</a> <a class="post-tag" href="/tags/pca/">PCA</a> <a class="post-tag" href="/tags/eda/">EDA</a> <a class="post-tag" href="/tags/distinct/">Distinct</a> <a class="post-tag" href="/tags/random-forest/">Random Forest</a> <a class="post-tag" href="/tags/beautifulsoup/">Beautifulsoup</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://datainclude.me{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
