<!DOCTYPE html><html lang="ko" mode="light" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>문장 사이의 거리 | Data Include Me</title><meta name="generator" content="Jekyll v3.9.3" /><meta property="og:title" content="문장 사이의 거리" /><meta name="author" content="HyunMin Kim" /><meta property="og:locale" content="ko" /><meta name="description" content="1. 문장 사이의 거리 1.1 문장 사이의 거리" /><meta property="og:description" content="1. 문장 사이의 거리 1.1 문장 사이의 거리" /><link rel="canonical" href="https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/" /><meta property="og:url" content="https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/" /><meta property="og:site_name" content="Data Include Me" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-18T09:10:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="문장 사이의 거리" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@HyunMin Kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"HyunMin Kim"},"dateModified":"2020-10-18T09:10:00+09:00","datePublished":"2020-10-18T09:10:00+09:00","description":"1. 문장 사이의 거리 1.1 문장 사이의 거리","headline":"문장 사이의 거리","mainEntityOfPage":{"@type":"WebPage","@id":"https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/"},"url":"https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/"}</script><meta property="og:image" content="https://datainclude.me/assets/img/sample/avatar.jpg" /> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="36x36" href="/assets/img/favicons/android-icon-36x36.png"><link rel="icon" type="image/png" sizes="48x48" href="/assets/img/favicons/android-icon-48x48.png"><link rel="icon" type="image/png" sizes="72x72" href="/assets/img/favicons/android-icon-72x72.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/android-icon-96x96.png"><link rel="icon" type="image/png" sizes="144x144" href="/assets/img/favicons/android-icon-144x144.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="70x70" href="/assets/img/favicons/ms-icon-70x70.png"><link rel="icon" type="image/png" sizes="144x144" href="/assets/img/favicons/ms-icon-144x144.png"><link rel="icon" type="image/png" sizes="150x150" href="/assets/img/favicons/ms-icon-150x150.png"><link rel="icon" type="image/png" sizes="310x310" href="/assets/img/favicons/ms-icon-310x310.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preload" href="https://www.googletagmanager.com/gtm.js?id=GTM-MW9VRMW9" as="script"> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-MW9VRMW9');</script><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" media="print" onload="this.media='all'"> <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> </noscript> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MW9VRMW9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Data Include Me</a></div><div class="site-subtitle font-italic">Data Science Blog</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/hmkim312" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['sanarial312','gmail.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>문장 사이의 거리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <script type="text/javascript"> var lazyloadads = false; function loadAds() { if (!lazyloadads) { var script = document.createElement("script"); script.type = "text/javascript"; script.async = true; script.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7594406644928408"; document.body.appendChild(script); lazyloadads = true; } } window.addEventListener("mousemove", loadAds, { once: true }); window.addEventListener('touchstart', loadAds, { once: true }); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>문장 사이의 거리</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 18, 2020, 9:10 AM +0900" > Oct 18, 2020 <i class="unloaded">2020-10-18T09:10:00+09:00</i> </span> by <span class="author"> HyunMin Kim </span></div><a href="https://hits.seeyoufarm.com"> <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/%2F&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=views&edge_flat=false" alt="페이지 조회수 뱃지", width: 100%;, height: 100%;/> </a></div><div class="post-content"><h2 id="1-문장-사이의-거리">1. 문장 사이의 거리</h2><hr /><h3 id="11-문장-사이의-거리">1.1 문장 사이의 거리</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/60168331/96366388-61d98c80-1182-11eb-998c-003df0c1b7a9.png" /></p><ul><li>평면이든 공간이든 두점 사이의 거리는 구할 수 있음</li><li>비교해야할 문장을 벡터로 표현할 수 있다면 거리를 구할수 있을것 같다.</li></ul><p><br /></p><h3 id="12-count-vectorizer">1.2 Count Vectorizer</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>
<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">min_df</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>sklearn이 제공하는 문장을 벡터로 변환하는 함수 CountVectorizer</li><li>단어들의 카운트(출현 빈도(frequency))로 여러 문서들을 벡터화</li><li>카운트 행렬, 단어 문서 행렬 (Term-Document Matrix, TDM)) 모두 소문자로 변환시키기 때문에 me 와 Me 는 모두 같은 특성이 됨</li></ul><p><br /></p><h3 id="13-훈련용-문장">1.3 훈련용 문장</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">contents</span> <span class="o">=</span> <span class="p">[</span><span class="s">'상처받은 아이들은 너무 일찍 커버려'</span><span class="p">,</span>
           <span class="s">'내가 상처받은 거 아는 사람 불편해'</span><span class="p">,</span>
           <span class="s">'잘 사는 사람들은 좋은 사람 되기 쉬워'</span><span class="p">,</span>
           <span class="s">'아무 일도 아니야 괜찮아'</span><span class="p">]</span>
</pre></table></code></div></div><ul><li>훈련용 문장</li><li>거리를 구하는 것이므로 지도하지 않아도됨</li></ul><p><br /></p><h3 id="14-okt-import">1.4 Okt import</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">konlpy.tag</span> <span class="kn">import</span> <span class="n">Okt</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Okt</span><span class="p">()</span>
</pre></table></code></div></div><ul><li>형태소 분석을 위해 Okt를 불러옴</li></ul><p><br /></p><h3 id="15-형태소-분석">1.5 형태소 분석</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">contents_tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">.</span><span class="n">morphs</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">]</span>
<span class="n">contents_tokens</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>[['상처', '받은', '아이', '들', '은', '너무', '일찍', '커버', '려'],
 ['내', '가', '상처', '받은', '거', '아는', '사람', '불편해'],
 ['잘', '사는', '사람', '들', '은', '좋은', '사람', '되기', '쉬워'],
 ['아무', '일도', '아니야', '괜찮아']]
</pre></table></code></div></div><ul><li>훈련용 문장을 형태소로 나누었음</li></ul><p><br /></p><h3 id="16-다시-문장으로-합침">1.6 다시 문장으로 합침</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">contents_for_vectorize</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">contents_tokens</span><span class="p">:</span>
    <span class="n">sentence</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">sentence</span> <span class="o">=</span> <span class="n">sentence</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">word</span>
        
    <span class="n">contents_for_vectorize</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    
<span class="n">contents_for_vectorize</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>[' 상처 받은 아이 들 은 너무 일찍 커버 려',
 ' 내 가 상처 받은 거 아는 사람 불편해',
 ' 잘 사는 사람 들 은 좋은 사람 되기 쉬워',
 ' 아무 일도 아니야 괜찮아']
</pre></table></code></div></div><ul><li>형태소 분석된 결과를 다시 하나의 문장씩으로 합침</li></ul><p><br /></p><h3 id="17-vectorize">1.7 Vectorize</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">contents_for_vectorize</span><span class="p">)</span>
<span class="n">X</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>&lt;4x17 sparse matrix of type '&lt;class 'numpy.int64'&gt;'
	with 20 stored elements in Compressed Sparse Row format&gt;
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">num_samples</span><span class="p">,</span> <span class="n">num_features</span> <span class="o">=</span> <span class="n">X</span><span class="p">.</span><span class="n">shape</span>
<span class="n">num_samples</span><span class="p">,</span> <span class="n">num_features</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>(4, 17)
</pre></table></code></div></div><ul><li>벡터라이즈를 수행하였고, 총 4개의 문장의 전체 말중치 단어가 17개 임</li></ul><p><br /></p><h3 id="18-확인">1.8 확인</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">vectorizer</span><span class="p">.</span><span class="n">get_feature_names</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>['괜찮아',
 '너무',
 '되기',
 '받은',
 '불편해',
 '사는',
 '사람',
 '상처',
 '쉬워',
 '아는',
 '아니야',
 '아무',
 '아이',
 '일도',
 '일찍',
 '좋은',
 '커버']
</pre></table></code></div></div><ul><li>17개의 형태소 확인</li></ul><p><br /></p><h3 id="19-테스트용-문장">1.9 테스트용 문장</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">new_post</span> <span class="o">=</span> <span class="p">[</span><span class="s">'상처받기 싫어 괜찮아'</span><span class="p">]</span>
<span class="n">new_post_tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">.</span><span class="n">morphs</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">new_post</span><span class="p">]</span>

<span class="n">new_post_for_vectorize</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">new_post_tokens</span><span class="p">:</span>
    <span class="n">sentence</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">sentence</span> <span class="o">=</span> <span class="n">sentence</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">word</span>
        
    <span class="n">new_post_for_vectorize</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    
<span class="n">new_post_for_vectorize</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>[' 상처 받기 싫어 괜찮아']
</pre></table></code></div></div><ul><li>테스트용 문장 형태소 분석 후 문장 더하기</li></ul><p><br /></p><h3 id="110-벡터로-표현">1.10 벡터로 표현</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">new_post_vec</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">transform</span><span class="p">(</span><span class="n">new_post_for_vectorize</span><span class="p">)</span>
<span class="n">new_post_vec</span><span class="p">.</span><span class="n">toarray</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>array([[1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0]])
</pre></table></code></div></div><ul><li>새로운 테스트용 문장을 만들고 벡터로 만듬</li><li>벡터이니, 거리를 구할 수 있음</li></ul><p><br /></p><h3 id="111-유클리드-거리">1.11 유클리드 거리</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="n">sp</span>

<span class="k">def</span> <span class="nf">dist_raw</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">-</span> <span class="n">v2</span>
    <span class="k">return</span> <span class="n">sp</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">delta</span><span class="p">.</span><span class="n">toarray</span><span class="p">())</span>
</pre></table></code></div></div><ul><li>단순히 기하학적인 거리를 사용해보기</li></ul><p><br /></p><h3 id="112-결과">1.12 결과</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">dist_raw</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="n">new_post_vec</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>
<span class="n">dist</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>[2.449489742783178, 2.23606797749979, 3.1622776601683795, 2.0]
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="s">'Best post is '</span><span class="p">,</span> <span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)),</span> <span class="s">', dist = '</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Test post is : '</span><span class="p">,</span> <span class="n">new_post</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best dist post is : '</span><span class="p">,</span> <span class="n">contents</span><span class="p">[</span><span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))])</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Best post is  3 , dist =  2.0
Test post is :  ['상처받기 싫어 괜찮아']
Best dist post is :  아무 일도 아니야 괜찮아
</pre></table></code></div></div><ul><li>테스트용 문장과 훈련용 문장의 거리를 구함</li><li>가장 가까운 거리는 2.0으로, 4번째 문장이 제일 가까움</li></ul><p><br /></p><h3 id="113-유사도---벡터사이의-거리">1.13 유사도 - 벡터사이의 거리</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">contents</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s">'</span><span class="p">,</span> <span class="n">X</span><span class="p">.</span><span class="n">getrow</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">toarray</span><span class="p">())</span>
    
<span class="k">print</span><span class="p">(</span><span class="s">'-----------------------------------------'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[T]'</span><span class="p">,</span> <span class="n">new_post_vec</span><span class="p">.</span><span class="n">toarray</span><span class="p">())</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>[0] [[0 1 0 1 0 0 0 1 0 0 0 0 1 0 1 0 1]]
[1] [[0 0 0 1 1 0 1 1 0 1 0 0 0 0 0 0 0]]
[2] [[0 0 1 0 0 1 2 0 1 0 0 0 0 0 0 1 0]]
[3] [[1 0 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0]]
-----------------------------------------
[T] [[1 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0]]
</pre></table></code></div></div><ul><li>문장의 유사도는 벡터사이의 거리를 잘 구하는 것이다</li><li>결국 관건은 문장을 벡터로 잘 만드는것</li><li>만들어진 벡터 사이의 거리를 잘 계산하는 것</li></ul><p><br /></p><h3 id="114-tf-idf">1.14 TF-IDF</h3><ul><li>한 문서에서 많이 등장한 단어에 가중치를 주는것 (Term Frep)</li><li>전체 문서에서 많이 나타나는 단어는 중요하지 않게 하는 것 (Inverse Document Freq)</li></ul><p><br /></p><h3 id="115-tfidf-verctorizer">1.15 Tfidf Verctorizer</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">min_df</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">decode_error</span><span class="o">=</span><span class="s">'ignore'</span><span class="p">)</span>
</pre></table></code></div></div><ul><li>sklearn에 패키지로 있다</li></ul><p><br /></p><h3 id="116-tf-idf-적용">1.16 TF-IDF 적용</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">contents_for_vectorize</span><span class="p">)</span>
<span class="n">num_samples</span><span class="p">,</span> <span class="n">num_features</span> <span class="o">=</span> <span class="n">X</span><span class="p">.</span><span class="n">shape</span>
<span class="n">num_samples</span><span class="p">,</span> <span class="n">num_features</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>(4, 17)
</pre></table></code></div></div><ul><li>TF-IDF을 다시 적용함</li></ul><p><br /></p><h3 id="117-테스트-문장-적용">1.17 테스트 문장 적용</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">new_post_vec</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">transform</span><span class="p">(</span><span class="n">new_post_for_vectorize</span><span class="p">)</span>
<span class="n">new_post_vec</span><span class="p">.</span><span class="n">toarray</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>array([[0.78528828, 0.        , 0.        , 0.        , 0.        ,
        0.        , 0.        , 0.6191303 , 0.        , 0.        ,
        0.        , 0.        , 0.        , 0.        , 0.        ,
        0.        , 0.        ]])
</pre></table></code></div></div><ul><li>테스트 문장의 벡터화</li></ul><p><br /></p><h3 id="118-결과">1.18 결과</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">dist_raw</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="n">new_post_vec</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>
<span class="n">dist</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>[1.254451632446019, 1.2261339938790283, 1.4142135623730951, 1.1021396119773588]
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="s">'Best post is '</span><span class="p">,</span> <span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)),</span> <span class="s">', dist = '</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Test post is : '</span><span class="p">,</span> <span class="n">new_post</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best dist post is : '</span><span class="p">,</span> <span class="n">contents</span><span class="p">[</span><span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))])</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Best post is  3 , dist =  1.1021396119773588
Test post is :  ['상처받기 싫어 괜찮아']
Best dist post is :  아무 일도 아니야 괜찮아
</pre></table></code></div></div><ul><li>아까의 유클리드거리보다 거리값이 바뀌어 있음</li><li>그래도 테스트 문장과 비슷한 문장의 결과는 똑같이 4번째 문장임</li></ul><p><br /></p><h2 id="2-실습">2. 실습</h2><hr /><h3 id="21-네이버-api-포스트에서-사용한-함수-사용">2.1 네이버 API 포스트에서 사용한 함수 사용</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">datetime</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_search_url</span><span class="p">(</span><span class="n">api_node</span><span class="p">,</span> <span class="n">search_text</span><span class="p">,</span> <span class="n">start_num</span><span class="p">,</span> <span class="n">disp_num</span><span class="p">):</span>
    <span class="n">base</span> <span class="o">=</span> <span class="s">'https://openapi.naver.com/v1/search'</span>
    <span class="n">node</span> <span class="o">=</span> <span class="s">'/'</span> <span class="o">+</span> <span class="n">api_node</span> <span class="o">+</span> <span class="s">'.json'</span>
    <span class="n">param_query</span> <span class="o">=</span> <span class="s">'?query='</span> <span class="o">+</span> <span class="n">urllib</span><span class="p">.</span><span class="n">parse</span><span class="p">.</span><span class="n">quote</span><span class="p">(</span><span class="n">search_text</span><span class="p">)</span>
    <span class="n">param_start</span> <span class="o">=</span> <span class="s">'&amp;start='</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">start_num</span><span class="p">)</span>
    <span class="n">param_disp</span> <span class="o">=</span> <span class="s">'&amp;display='</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">disp_num</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">base</span> <span class="o">+</span> <span class="n">node</span> <span class="o">+</span> <span class="n">param_query</span> <span class="o">+</span> <span class="n">param_start</span> <span class="o">+</span> <span class="n">param_disp</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_result_onpage</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">'X-Naver-Client-Id'</span><span class="p">,</span> <span class="n">client_id</span><span class="p">)</span>
    <span class="n">request</span><span class="p">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">'X-Naver-Client-Secret'</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">)</span>
    
    <span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    
    <span class="k">print</span><span class="p">(</span><span class="s">'[%s] Url Request Success'</span> <span class="o">%</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
    
    <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">read</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">))</span>
</pre></table></code></div></div><ul><li>네이버 API 실습시 사용한 함수로 문장을 가져와 보기</li><li><a href="https://hmkim312.github.io/posts/네이버API_사용해보기" target="_blank">https://hmkim312.github.io/posts/네이버API_사용해보기</a></li></ul><p><br /></p><h3 id="22-문장-수집">2.2 문장 수집</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">client_id</span> <span class="o">=</span> <span class="s">'your_id'</span> <span class="c1"># your_id
</span><span class="n">client_secret</span> <span class="o">=</span> <span class="s">'your_secret'</span> <span class="c1"># your_secret
</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">get_search_url</span><span class="p">(</span><span class="s">'kin'</span><span class="p">,</span> <span class="s">'파이썬'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">one_result</span> <span class="o">=</span> <span class="n">get_result_onpage</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">one_result</span><span class="p">[</span><span class="s">'items'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'description'</span><span class="p">]</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>[2020-10-18 22:02:19.228174] Url Request Success





'&lt;b&gt;파이썬&lt;/b&gt; 독학으로 강의 들으려고 합니다 코딩 배워보려구요.. &lt;b&gt;파이썬&lt;/b&gt; 강의 사이트 추천 부탁드릴게요 추천해주시면... 답변드리겠습니다 &lt;b&gt;파이썬&lt;/b&gt;을 독학으로 공부하시는데 어려움이 있으신가요? &lt;b&gt;파이썬&lt;/b&gt;이 다른 언어들에 비해 비교적... '
</pre></table></code></div></div><ul><li>훈련용 문장으로 사용할 데이터를 네이버 지식인에서 API로 받아옴</li></ul><p><br /></p><h3 id="23-태그-제거">2.3 태그 제거</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">delete_tag</span><span class="p">(</span><span class="n">input_str</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">input_str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'&lt;b&gt;'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'&lt;/b&gt;'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_description</span><span class="p">(</span><span class="n">pages</span><span class="p">):</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">sentences</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">[</span><span class="s">'items'</span><span class="p">]:</span>
        <span class="n">contents</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">delete_tag</span><span class="p">(</span><span class="n">sentences</span><span class="p">[</span><span class="s">'description'</span><span class="p">]))</span>
        
    <span class="k">return</span> <span class="n">contents</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">contents</span> <span class="o">=</span> <span class="n">get_description</span><span class="p">(</span><span class="n">one_result</span><span class="p">)</span>
<span class="n">contents</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>['파이썬 독학으로 강의 들으려고 합니다 코딩 배워보려구요.. 파이썬 강의 사이트 추천 부탁드릴게요 추천해주시면... 답변드리겠습니다 파이썬을 독학으로 공부하시는데 어려움이 있으신가요? 파이썬이 다른 언어들에 비해 비교적... ',
 '... 64비트용 파이썬 설치할 수 있나요? 2. 64비트 윈도우에 32비트용 파이썬 설치할 수 있나요? 3. 윈도우용의 설치 파일의 확장자는 exe인가요? 4. 파이썬 설치... 32비트 윈도우에 64비트용 파이썬 설치할 수 있나요?... ',
 '파이썬 이제 막 해보려고 하는데 어떻게 공부해야하나요? 파이썬 공부로 KG에듀원 이룸 추천해드립니다. PC로만... 많은데 파이썬 강의마다 필요한 자료가 업로드돼 있어서... 그래서 파이썬 공부하시는 분들이 선호를 많이 하세요.... ',
 '파이썬수업을 듣고싶은데 다들 어디서 학습을 활용을 하시나요?? 파이썬 수업쪽으로 전문화된 곳 추천해주세요. 파이썬수업은 KG에듀원이룸을 추천해드리겠습니다. 이번년도에 찍은 신규오픈 현장강의입니다.... ',
 '파이썬 교육과정을 듣고싶은데요. 제가 나이가 40이... 파이썬교육과정을 배워보고 싶어서 찾아보고 있는데요. 파이썬교육과정을 좀 쉽게 가르쳐주는 학원이 있는지 궁금합니다. 안녕하세요, IT 컨설턴트 큐쌤입니다. 파이썬교육... ',
 '... C언어, 자바, 파이썬 등 너무 많은데 일단 좀 추려서 파이썬이랑 자바 두개 중에 정하려고 하는데 좀 난이도... 추천해주세요ㅠㅠ  파이썬이 제일 접근하기 쉬운언어이니 파이썬 먼저 공부해보시고, c언어 자바 하시면... ',
 "... 저장되도록 파이썬 코드로 구현해주실 수 있을까요?... 파이썬 pandas 라이브러리를 설치하시고, 아래 코드를... read_excel('파이썬 질문.xlsx', data_only=True) df['고유번호'] = df.groupby('이름').ngroup() + 1 df.to_excel('파이썬 질문... ",
 '부산에 파이썬 제대로 배울 수 있는 곳 있나요? 파이썬학원을 찾고 있는데 아는게 많이 없어서 제한적이네요 부산 파이썬학원 추천해주세요 부산 파이썬학원으로... ',
 '파이썬 공부 하려고 하는데 독학으로도 가능할까요? 비전공자 입니다... 파이썬공부에 대해 질문 남겨주셨는데요, 우선, 파이썬은 홈페이지 개발에 많이... 쓰입니다 파이썬은 사람이 생각하는 방식을 그대로 표현할 수 있도록 해주는... ',
 '파이썬 언어를 공부하려고 합니다. 인강으로 공부하려고 방향잡을려고 합니다. 파이썬 강좌는 어떤 사이트가 잘가르쳐주는지 파이썬 강좌 추천 부탁드립니다. 파이썬강좌는 국내 no.1 it 인터넷 전문 강의 사이트 kg에듀원 이룸... ']
</pre></table></code></div></div><ul><li>네이버 지식인에 있던 질문과 답변을 가져옴</li><li>하지만 b 태크가 갈이 있어서 제거시키고 질문과 답변만 리스트화해서 저장함</li></ul><p><br /></p><h3 id="24-형태소-분석">2.4 형태소 분석</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>
<span class="kn">from</span> <span class="nn">konlpy.tag</span> <span class="kn">import</span> <span class="n">Okt</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Okt</span><span class="p">()</span>
<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">min_df</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">contents_tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">.</span><span class="n">morphs</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">]</span>
<span class="n">contents_tokens</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>[['파이썬',
  '독학',
  '으로',
  '강의',
  '들으려고',
  '합니다',
  '코딩',
  '배워',
  '보려구요',
  '...']]
</pre></table></code></div></div><ul><li>가져온 데이터를 형태소 분석 해봄</li></ul><p><br /></p><h3 id="25-vectorize-후-합치기">2.5 Vectorize 후 합치기</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">contents_for_vectorize</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">contents_tokens</span><span class="p">:</span>
    <span class="n">sentence</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">sentence</span> <span class="o">=</span> <span class="n">sentence</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">word</span>
        
    <span class="n">contents_for_vectorize</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    
<span class="n">contents_for_vectorize</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>[' 파이썬 독학 으로 강의 들으려고 합니다 코딩 배워 보려구요 .. 파이썬 강의 사이트 추천 부탁드릴게요 추천 해주시면 ... 답변 드리겠습니다 파이썬 을 독학 으로 공부 하시는데 어려움 이 있으신 가요 ? 파이썬 이 다른 언어 들 에 비해 비교 적 ...',
 ' ... 64 비트 용 파이썬 설치 할 수 있나요 ? 2 . 64 비트 윈도우 에 32 비트 용 파이썬 설치 할 수 있나요 ? 3 . 윈도우 용의 설치 파일 의 확장자 는 exe 인가요 ? 4 . 파이썬 설치 ... 32 비트 윈도우 에 64 비트 용 파이썬 설치 할 수 있나요 ?...',
 ' 파이썬 이제 막 해보려고 하는데 어떻게 공부 해야하나요 ? 파이썬 공부 로 KG 에듀 원 이룸 추천 해드립니다 . PC 로만 ... 많은데 파이썬 강의 마다 필요한 자료 가 업로드 돼 있어서 ... 그래서 파이썬 공부 하시는 분 들 이 선호 를 많이 하세요 ....',
 ' 파이썬 수업 을 듣고싶은데 다 들 어디서 학습 을 활용 을 하시나요 ?? 파이썬 수업 쪽 으로 전문화 된 곳 추천 해주세요 . 파이썬 수업 은 KG 에듀 원 이룸을 추천 해드리겠습니다 . 이번 년도 에 찍은 신규 오픈 현 장강 의 입니다 ....',
 ' 파이썬 교육과정 을 듣고 싶은데요 . 제 가 나이 가 40 이 ... 파이썬 교육과정 을 배워 보고 싶어서 찾아보고 있는데요 . 파이썬 교육과정 을 좀 쉽게 가르쳐주는 학원 이 있는지 궁금합니다 . 안녕하세요 , IT 컨설턴트 큐쌤 입니다 . 파이썬 교육 ...',
 ' ... C 언어 , 자바 , 파이썬 등 너무 많은데 일단 좀 추려서 파이썬 이랑 자바 두 개 중 에 정 하려고 하는데 좀 난이도 ... 추천 해주세요 ㅠㅠ 파이썬 이 제일 접근 하기 쉬운 언어 이니 파이썬 먼저 공부 해보시고 , c 언어 자바 하시면 ...',
 " ... 저장 되도록 파이썬 코드 로 구현 해주실 수 있을까요 ?... 파이썬 pandas 라이브러리 를 설치 하시고 , 아래 코드 를 ... read _ excel (' 파이썬 질문 . xlsx ', data _ only = True ) df [' 고유 번호 '] = df . groupby (' 이름 '). ngroup () + 1 df . to _ excel (' 파이썬 질문 ...",
 ' 부산 에 파이썬 제대로 배울 수 있는 곳 있나요 ? 파이썬 학원 을 찾고 있는데 아는게 많이 없어서 제한 적 이네 요 부산 파이썬 학원 추천 해주세요 부산 파이썬 학원 으로 ...',
 ' 파이썬 공부 하려고 하는데 독학 으로도 가능할까 요 ? 비 전공자 입니다 ... 파이썬 공부 에 대해 질문 남겨주셨는데요 , 우선 , 파이썬 은 홈페이지 개발 에 많이 ... 쓰입니다 파이썬 은 사람 이 생각 하는 방식 을 그대로 표현 할 수 있도록 해주는 ...',
 ' 파이썬 언어 를 공부 하려고 합니다 . 인강 으로 공부 하려고 방향 잡을려고 합니다 . 파이썬 강좌 는 어떤 사이트 가 잘 가르쳐주는지 파이썬 강좌 추천 부탁드립니다 . 파이썬 강좌 는 국내 no . 1 it 인터넷 전문 강의 사이트 kg 에듀 원 이룸 ...']
</pre></table></code></div></div><ul><li>앞에서 훈련용 문장을 했던것 처럼 다시 Vectorize 후 합침</li></ul><p><br /></p><h3 id="26-결과">2.6 결과</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">contents_for_vectorize</span><span class="p">)</span>
<span class="n">X</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>&lt;10x171 sparse matrix of type '&lt;class 'numpy.int64'&gt;'
	with 221 stored elements in Compressed Sparse Row format&gt;
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">num_samples</span><span class="p">,</span> <span class="n">num_features</span> <span class="o">=</span> <span class="n">X</span><span class="p">.</span><span class="n">shape</span>
<span class="n">num_samples</span><span class="p">,</span> <span class="n">num_features</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>(10, 171)
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">vectorizer</span><span class="p">.</span><span class="n">get_feature_names</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre>['32',
 '40',
 '64',
 'data',
 'df',
 'excel',
 'exe',
 'groupby',
 'it',
 'kg',
 'ngroup',
 'no',
 'only',
 'pandas',
 'pc',
 'read',
 'to',
 'true',
 'xlsx',
 'ㅠㅠ',
 '가능할까',
 '가르쳐주는',
 '가르쳐주는지',
 '가요',
 '강의',
 ...
 '해야하나요',
 '해주는',
 '해주세요',
 '해주시면',
 '해주실',
 '홈페이지',
 '확장자',
 '활용']
</pre></table></code></div></div><ul><li>총 10개의 문장이 있고, 171개의 형태소가 있음</li></ul><p><br /></p><h3 id="27-유사도-측정할-테스트-문장">2.7 유사도 측정할 테스트 문장</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">new_post</span> <span class="o">=</span> <span class="p">[</span><span class="s">'파이썬을 배우는데 좋은 방법이 어떤것인가요?'</span><span class="p">]</span>
<span class="n">new_post_tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">.</span><span class="n">morphs</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">new_post</span><span class="p">]</span>

<span class="n">new_post_for_vectorize</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">new_post_tokens</span><span class="p">:</span>
    <span class="n">sentence</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">sentence</span> <span class="o">=</span> <span class="n">sentence</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">word</span>
        
    <span class="n">new_post_for_vectorize</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    
<span class="n">new_post_for_vectorize</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>[' 파이썬 을 배우는데 좋은 방법 이 어떤 것 인가요 ?']
</pre></table></code></div></div><ul><li>테스트 문장을 형태소로 나누고, 다시 합침</li></ul><p><br /></p><h3 id="28-테스트-문장의-vectorize">2.8 테스트 문장의 Vectorize</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">new_post_vec</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">transform</span><span class="p">(</span><span class="n">new_post_for_vectorize</span><span class="p">)</span>
<span class="n">new_post_vec</span><span class="p">.</span><span class="n">toarray</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>array([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]])
</pre></table></code></div></div><ul><li>테스트 문장을 Vectorize화</li></ul><p><br /></p><h3 id="29-유클리드-거리">2.9 유클리드 거리</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="n">sp</span>

<span class="k">def</span> <span class="nf">dist_raw</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">-</span> <span class="n">v2</span>
    <span class="k">return</span> <span class="n">sp</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">delta</span><span class="p">.</span><span class="n">toarray</span><span class="p">())</span>

<span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">dist_raw</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="n">new_post_vec</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>
<span class="n">dist</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>[6.782329983125268,
 9.746794344808963,
 6.6332495807108,
 6.164414002968976,
 6.324555320336759,
 7.0,
 7.280109889280518,
 6.557438524302,
 6.164414002968976,
 7.211102550927978]
</pre></table></code></div></div><h3 id="210-유클리드-거리로-확인하는-테스트-문장과-가장-가까운-문장">2.10 유클리드 거리로 확인하는 테스트 문장과 가장 가까운 문장</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="s">'Best post is '</span><span class="p">,</span> <span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)),</span> <span class="s">', dist = '</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Test post is : '</span><span class="p">,</span> <span class="n">new_post</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best dist post is : '</span><span class="p">,</span> <span class="n">contents</span><span class="p">[</span><span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))])</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Best post is  3 , dist =  6.164414002968976
Test post is :  ['파이썬을 배우는데 좋은 방법이 어떤것인가요?']
Best dist post is :  파이썬수업을 듣고싶은데 다들 어디서 학습을 활용을 하시나요?? 파이썬 수업쪽으로 전문화된 곳 추천해주세요. 파이썬수업은 KG에듀원이룸을 추천해드리겠습니다. 이번년도에 찍은 신규오픈 현장강의입니다.... 
</pre></table></code></div></div><ul><li>생각보다 괜찮아 보인다.</li></ul><p><br /></p><h3 id="211-normalize">2.11 Normalize</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">dist_norm</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
    <span class="n">v1_normalized</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">/</span> <span class="n">sp</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">toarray</span><span class="p">())</span>
    <span class="n">v2_normalized</span> <span class="o">=</span> <span class="n">v2</span> <span class="o">/</span> <span class="n">sp</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v2</span><span class="p">.</span><span class="n">toarray</span><span class="p">())</span>
    
    <span class="n">delta</span> <span class="o">=</span> <span class="n">v1_normalized</span> <span class="o">-</span> <span class="n">v2_normalized</span>
    
    <span class="k">return</span> <span class="n">sp</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">delta</span><span class="p">.</span><span class="n">toarray</span><span class="p">())</span>
</pre></table></code></div></div><ul><li>벡터의 거리를 구하는 방법중 유클리드 방식이 아닌 놈의 방식으로 구해봄</li><li>Norm은 벡터의 길이 혹은 크기를 측정하는 방법(함수)입니다. Norm이 측정한 벡터의 크기는 원점에서 벡터 좌표까지의 거리라고 함</li></ul><p><br /></p><h3 id="212-normalize-결과확인">2.12 Normalize 결과확인</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">dist_norm</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="n">new_post_vec</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best post is '</span><span class="p">,</span> <span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)),</span> <span class="s">', dist = '</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Test post is : '</span><span class="p">,</span> <span class="n">new_post</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best dist post is : '</span><span class="p">,</span> <span class="n">contents</span><span class="p">[</span><span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))])</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Best post is  9 , dist =  1.1172976201519322
Test post is :  ['파이썬을 배우는데 좋은 방법이 어떤것인가요?']
Best dist post is :  파이썬 언어를 공부하려고 합니다. 인강으로 공부하려고 방향잡을려고 합니다. 파이썬 강좌는 어떤 사이트가 잘가르쳐주는지 파이썬 강좌 추천 부탁드립니다. 파이썬강좌는 국내 no.1 it 인터넷 전문 강의 사이트 kg에듀원 이룸... 
</pre></table></code></div></div><ul><li>유클리드 거리와는 결과가 다르지만, 그래도 어느정도 맞아보인다.</li></ul><p><br /></p><h3 id="213-tfidf로-vectorize">2.13 Tfidf로 Vectorize</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">min_df</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">decode_error</span><span class="o">=</span> <span class="s">'ignore'</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">contents_for_vectorize</span><span class="p">)</span>
<span class="n">X</span><span class="p">.</span><span class="n">shape</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>(10, 171)
</pre></table></code></div></div><ul><li>이번에는 Tfidf로 Vectorize를 해보았음</li></ul><p><br /></p><h3 id="214-norm-방식의-거리구하기로-결과-확인">2.14 Norm 방식의 거리구하기로 결과 확인</h3><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">dist_norm</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="n">new_post_vec</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best post is '</span><span class="p">,</span> <span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)),</span> <span class="s">', dist = '</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Test post is : '</span><span class="p">,</span> <span class="n">new_post</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Best dist post is : '</span><span class="p">,</span> <span class="n">contents</span><span class="p">[</span><span class="n">dist</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">))])</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Best post is  9 , dist =  1.2312580680454142
Test post is :  ['파이썬을 배우는데 좋은 방법이 어떤것인가요?']
Best dist post is :  파이썬 언어를 공부하려고 합니다. 인강으로 공부하려고 방향잡을려고 합니다. 파이썬 강좌는 어떤 사이트가 잘가르쳐주는지 파이썬 강좌 추천 부탁드립니다. 파이썬강좌는 국내 no.1 it 인터넷 전문 강의 사이트 kg에듀원 이룸... 
</pre></table></code></div></div><ul><li>결과는 똑같이 나오긴 했음</li></ul><p><br /></p><h2 id="3-요약">3. 요약</h2><hr /><h3 id="31-요약">3.1 요약</h3><ul><li>문장간의 유사도는 문장을 벡터화 시켜서 벡터의 거리를 가까운 거기로 구하는 방식</li><li>벡터의 거리가 가까우면 유사한 문장으로 생각 할수 있음.</li><li>벡터의 거리를 구하는 방식은 Norm, 유클리드 방식이 있음.</li></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/data-science/'>Data Science</a>, <a href='/categories/machine-learning/'>Machine Learning</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/count-vectorizer/" class="post-tag no-text-decoration" >Count Vectorizer</a> <a href="/tags/vectorize/" class="post-tag no-text-decoration" >Vectorize</a> <a href="/tags/tfidf-vectorizer/" class="post-tag no-text-decoration" >Tfidf Vectorizer</a> <a href="/tags/norm/" class="post-tag no-text-decoration" >Norm</a> <a href="/tags/euclidean-distance/" class="post-tag no-text-decoration" >Euclidean Distance</a> <a href="/tags/konlpy/" class="post-tag no-text-decoration" >KoNLPy</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=문장 사이의 거리 - Data Include Me&url=https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=문장 사이의 거리 - Data Include Me&u=https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=문장 사이의 거리 - Data Include Me&url=https://datainclude.me/posts/%EB%AC%B8%EC%9E%A5_%EC%82%AC%EC%9D%B4%EC%9D%98_%EA%B1%B0%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Panel on right side (Desktop views) v2.3 © 2024 Your Name MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li class="recent-item"> <a href="/posts/%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C_%EC%BB%B4%ED%93%A8%ED%8C%85_%EA%B0%80%EC%83%81%ED%99%94/">클라우드 컴퓨팅 - 가상화</a> <span class="text-muted small">2024-10-28</span></li><li class="recent-item"> <a href="/posts/gemini_api_%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0/">Gemini API 사용해보기</a> <span class="text-muted small">2024-03-12</span></li><li class="recent-item"> <a href="/posts/Ollama%EC%99%80_Python_%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC_%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC_LLaMa2%EB%A5%BC_%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C_%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">Ollama와 Python 라이브러리를 이용하여 LLaMa2를 로컬에서 사용하기</a> <span class="text-muted small">2024-02-13</span></li><li class="recent-item"> <a href="/posts/Mistral_7B_Fine_Tuning/">Mistral 7B 파인튜닝(Fine Tuning)하기</a> <span class="text-muted small">2023-10-25</span></li><li class="recent-item"> <a href="/posts/Penn_Fudan%EC%9C%BC%EB%A1%9C_%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94_%EA%B0%9D%EC%B2%B4_%ED%83%90%EC%A7%80_%EB%B6%84%ED%95%A0/">Penn-Fudan으로 알아보는 객체 탐지(Object Detection), 분할(Segmentation) with FasterRCNN</a> <span class="text-muted small">2023-10-23</span></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tensorflow/">Tensorflow</a> <a class="post-tag" href="/tags/sklearn/">Sklearn</a> <a class="post-tag" href="/tags/round/">Round</a> <a class="post-tag" href="/tags/python-lv0/">Python Lv0</a> <a class="post-tag" href="/tags/pca/">PCA</a> <a class="post-tag" href="/tags/eda/">EDA</a> <a class="post-tag" href="/tags/distinct/">Distinct</a> <a class="post-tag" href="/tags/random-forest/">Random Forest</a> <a class="post-tag" href="/tags/beautifulsoup/">Beautifulsoup</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div><style> .recent-item { margin-bottom: 0.5rem; } .recent-item a { color: var(--link-color); } .recent-item .small { font-size: 0.75rem; margin-left: 0.5rem; }</style></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EB%84%A4%EC%9D%B4%EB%B2%84%EC%98%81%ED%99%94%ED%8F%89%EC%A0%90%EC%9D%84_%EC%9D%B4%EC%9A%A9%ED%95%9C_%EA%B0%90%EC%A0%95%EB%B6%84%EC%84%9D/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 21, 2020 <i class="unloaded">2020-10-21T09:10:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>네이버 영화 평점을 이용한 감성 분석</h3><div class="text-muted small"><p> 1. 네이버 영화 1.1 네이버 영화 평점 https://movie.naver.com/movie/point/af/list.nhn 관객이 영화를 관람 후 리뷰와 함께 평점을 0점 ~ 10점 까지의 점수를 남김 영화의 리뷰와 함께 평점을 크롤링해와서 감성분석에 사용 1.2 Data Load 1 2 3 4 import pandas as...</p></div></div></a></div><div class="card"> <a href="/posts/NLTK%EC%99%80_KoNLPy%EB%A1%9C_%ED%95%B4%EB%B3%B4%EB%8A%94_WordCloud/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 13, 2020 <i class="unloaded">2020-10-13T08:10:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>NLTK와 KoNLP로 해보는 WordCloud</h3><div class="text-muted small"><p> 1. NLTK &amp; KoNLPy 설치 1.1 NLTK 설치 pip install nltk pip install –upgrade nltk NLTK는 아나콘다를 설치했다면 기본으로 설치되어 있음 1.2 KoNLPy 설치 pip install JPype1 pip install konlpy pip install wor...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%82%98%EC%9D%B4%EB%B8%8C_%EB%B2%A0%EC%9D%B4%EC%A7%80%EC%95%88%EC%9C%BC%EB%A1%9C_%ED%95%B4%EB%B3%B4%EB%8A%94_NLTK/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 13, 2020 <i class="unloaded">2020-10-13T08:40:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>나이브 베이지안 분류기(Naive Bayes Classifier)으로 해보는 NLTK</h3><div class="text-muted small"><p> 1. 단일문서의 WordCloud 1.1 단일문서 불러오기 import nltk from konlpy.corpus import kobill file_ko = kobill.fileids() doc_ko = kobill.open('1809890.txt').read() print(doc_ko) 지방공무원법 일부개정법률안 (정의화의원 대표발의 ) ...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D%EC%9D%84_%EC%9D%B4%EC%9A%A9%ED%95%9C_%ED%83%80%EC%9D%B4%ED%83%80%EB%8B%89_%EC%83%9D%EC%A1%B4%EC%9E%90_%EC%98%88%EC%B8%A1/" class="btn btn-outline-primary"><p>머신러닝을 이용한 타이타닉 생존자 예측</p></a> <a href="/posts/%EC%8B%9C%EA%B3%84%EC%97%B4_%EB%B6%84%EC%84%9D_%EA%B8%B0%EC%B4%88/" class="btn btn-outline-primary"><p>시계열 분석의 기초</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/tensorflow/">Tensorflow</a> <a class="post-tag" href="/tags/sklearn/">Sklearn</a> <a class="post-tag" href="/tags/round/">Round</a> <a class="post-tag" href="/tags/python-lv0/">Python Lv0</a> <a class="post-tag" href="/tags/pca/">PCA</a> <a class="post-tag" href="/tags/eda/">EDA</a> <a class="post-tag" href="/tags/distinct/">Distinct</a> <a class="post-tag" href="/tags/random-forest/">Random Forest</a> <a class="post-tag" href="/tags/beautifulsoup/">Beautifulsoup</a> <a class="post-tag" href="/tags/baekjoon/">Baekjoon</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://datainclude.me{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
